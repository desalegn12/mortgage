{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/oem/facebok/react/mortgage/src/Chart.js\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport { select } from \"d3-selection\";\nimport { line } from \"d3-shape\";\nimport { scaleLinear } from \"d3-scale\";\nimport { axisBottom, axisLeft } from \"d3-axis\";\nimport \"d3-transition\";\nvar margin = {\n  top: 20,\n  right: 20,\n  bottom: 20,\n  left: 80\n},\n    fullWidth = 800,\n    fullHeight = 300,\n    width = fullWidth - margin.left - margin.right,\n    height = fullHeight - margin.top - margin.bottom;\nvar x = scaleLinear().range([0, width]);\nvar y = scaleLinear().range([0, height]);\nvar actual = line().x(function (d, i) {\n  return x(i + (d.partial / 12 || 1) - 1);\n}).y(function (d) {\n  return y(d.balance);\n});\nvar baseline = line().x(function (d, i) {\n  return x(i);\n}).y(function (d) {\n  return y(d.baseline);\n});\n\nvar Chart = function Chart(_ref) {\n  var payments = _ref.payments;\n  var chart = useRef(\"\");\n  useEffect(function () {\n    var chartEl = select(chart.current.value);\n    x.domain([0, payments.length - 1]);\n    y.domain([payments[0].balance, 0]);\n    chartEl.select(\".x\").call(axisBottom(x).ticks(Math.min(payments.length, 30)));\n    chartEl.select(\".y\").call(axisLeft(y));\n    chartEl.select(\".baseline\").transition().attr(\"d\", baseline(payments));\n    chartEl.select(\".actual\").transition().attr(\"d\", actual(payments));\n  }, [payments]);\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: chart,\n    height: \"100%\",\n    width: \"100%\",\n    viewBox: \"0 0 \".concat(fullWidth, \" \").concat(fullHeight),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axis x\",\n    transform: \"translate(0, \".concat(height, \")\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axis y\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"line baseline\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"line actual\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default Chart;","map":{"version":3,"sources":["/home/oem/facebok/react/mortgage/src/Chart.js"],"names":["React","useEffect","useRef","select","line","scaleLinear","axisBottom","axisLeft","margin","top","right","bottom","left","fullWidth","fullHeight","width","height","x","range","y","actual","d","i","partial","balance","baseline","Chart","payments","chart","chartEl","current","value","domain","length","call","ticks","Math","min","transition","attr"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\n\nimport { select } from \"d3-selection\";\nimport { line } from \"d3-shape\";\nimport { scaleLinear } from \"d3-scale\";\nimport { axisBottom, axisLeft } from \"d3-axis\";\nimport \"d3-transition\";\n\nconst margin = { top: 20, right: 20, bottom: 20, left: 80 },\n\tfullWidth = 800,\n\tfullHeight = 300,\n\twidth = fullWidth - margin.left - margin.right,\n\theight = fullHeight - margin.top - margin.bottom;\n\nconst x = scaleLinear().range([0, width]);\n\nconst y = scaleLinear().range([0, height]);\n\nconst actual = line()\n\t.x((d, i) => x(i + (d.partial / 12 || 1) - 1))\n\t.y((d) => y(d.balance));\n\nconst baseline = line()\n\t.x((d, i) => x(i))\n\t.y((d) => y(d.baseline));\n\nconst Chart = ({ payments }) => {\n\tconst chart = useRef(\"\");\n\n\tuseEffect(() => {\n\t\tconst chartEl = select(chart.current.value);\n\t\tx.domain([0, payments.length - 1]);\n\t\ty.domain([payments[0].balance, 0]);\n\n\t\tchartEl\n\t\t\t.select(\".x\")\n\t\t\t.call(axisBottom(x).ticks(Math.min(payments.length, 30)));\n\n\t\tchartEl.select(\".y\").call(axisLeft(y));\n\n\t\tchartEl\n\t\t\t.select(\".baseline\")\n\t\t\t.transition()\n\t\t\t.attr(\"d\", baseline(payments));\n\n\t\tchartEl\n\t\t\t.select(\".actual\")\n\t\t\t.transition()\n\t\t\t.attr(\"d\", actual(payments));\n\t}, [payments]);\n\n\treturn (\n\t\t<svg\n\t\t\tref={chart}\n\t\t\theight=\"100%\"\n\t\t\twidth=\"100%\"\n\t\t\tviewBox={`0 0 ${fullWidth} ${fullHeight}`}>\n\t\t\t<g transform={`translate(${margin.left},${margin.top})`}>\n\t\t\t\t<g className=\"axis x\" transform={`translate(0, ${height})`} />\n\t\t\t\t<g className=\"axis y\" />\n\t\t\t\t<path className=\"line baseline\" />\n\t\t\t\t<path className=\"line actual\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n};\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}